<% layout('../_common/layouts/general') %>
<div id="mainCtrl" class="px-0 pt-2">
	<form class="row m-0"></form>
</div>
<script type="text/javascript">
	
if(window.location.hash == '') {
	window.location.hash = '/dashboard/main'
}

$(document).ready(() => {

	sayfayiGoster()
	window.onhashchange = () => {
		hashObj = getHashObject()

		sayfayiGoster()
	}
})

function sayfayiGoster(){
	publishPage('#mainCtrl form',
	()=>{ //before
		anotherViewStyle('mainCtrl')
		$('#mainCtrl form').html('loading...')
		bSayfaAciliyor = true
		if((((hashObj || {}).query || {}).mid || '') != '') {
			$(`#leftMenu a`).removeClass('active')
			$(`#leftMenu #menu${hashObj.query.mid.replaceAll('.','-')}`).addClass('active')
		}
		toggleMenu()
	},
	()=>{ //after

	})
}

function toggleMenu(status) {
	if(status == 'show') {
		$('#layoutSidenav_nav').toggle(0)
	} else if(window.innerWidth < 1000) {
		$('#layoutSidenav_nav').hide()

	}
}


function anotherViewStyle(divId) {
	switch ((hashObj.query || {}).view || '') {
		case 'print':
			viewStylePrint(divId)
			break
		case 'plain':
			viewStylePlain(divId)
			break
	}
}

function viewStylePlain(divId) {

	$('body').hide()
	$('#title-panel').hide()
	$('.navtop').hide()
	$('#layoutSidenav_nav').hide()
	$('.footer').hide()
	$('#layoutSidenav_content').css('margin-top', '0px')
	$('#main-container').removeClass('cerceve1')
	$('#main-container').removeClass('p1')

	$('body').show()
}

function viewStylePrint(divId) {

	$('body').hide()
	$('#title-panel').hide()
	$('.navtop').hide()
	$('#layoutSidenav_nav').hide()
	$('.footer').hide()
	$('#layoutSidenav_content').css('margin-top', '0px')
	$('#main-container').removeClass('cerceve1')
	$('#main-container').removeClass('p1')
	$(`body #${divId}`).remove()

	var ifrm = document.createElement('iframe')
	ifrm.setAttribute('id', divId)
	ifrm.style.display = 'block'
	ifrm.style.border = 'none'
	ifrm.style.height = '90vh'
	ifrm.style.width = '100vw'

	$('body').css('margin', 0)

	document.getElementById('main-container').appendChild(ifrm)
	document.getElementById('main-container').innerHTML += `
	<div class="row m-0 border">
	<div class="col-12 p-2">
	<a class="btn btn-primary ms-3 mt-2" href="javascript:frameYazdir('${divId}')"><i class="fas fa-print"></i> YazdÄ±r</a>
	<a class="btn btn-dark ms-3 mt-2" href="javascript:pencereyiKapat()"><i class="fas fa-times"></i> Kapat</a>
	</div>
	</div>
	`
	$('body').show()
}
</script>